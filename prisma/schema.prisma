generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int       @id @default(autoincrement())
  email         String    @unique(map: "email") @db.VarChar(255)
  password      String    @db.VarChar(255)
  name          String?   @db.VarChar(255)
  provider      String?   @db.VarChar(255)
  providerId    String?   @unique(map: "providerId") @db.VarChar(255)
  emailVerified Boolean   @default(false)
  birth_date    DateTime?
  gender        Int       @default(0)
  role_level    Int       @default(1)
  createdAt     DateTime  @default(now()) @db.DateTime(0)
  updatedAt     DateTime  @default(now()) @updatedAt @db.DateTime(0)
}

model StoryLists {
  id                    Int            @id @default(autoincrement())
  lang                  String?        @db.VarChar(255)
  order                 String?        @db.VarChar(255)
  main_menu_name        String?        @db.VarChar(255)
  main_menu_name_size   Int?
  main_menu_name_weight String?        @db.VarChar(255)
  main_menu_name_color  String?        @db.VarChar(255)
  main_menu_image       String?        @db.VarChar(255)
  main_menu_title       String?        @db.VarChar(255)
  main_menu_content     String?        @db.Text
  main_menu_btn_left    String?        @db.VarChar(255)
  main_menu_btn_right   String?        @db.VarChar(255)
  stroy_name            String?        @db.VarChar(255)
  author                String?        @db.VarChar(255)
  story_type            String?        @db.VarChar(255)
  price                 String?        @db.VarChar(255)
  chapter_type          String?        @db.VarChar(255)
  open                  String?        @db.VarChar(255)
  view_times            String?        @db.VarChar(255)
  buy_times             String?        @db.VarChar(255)
  createdAt             DateTime       @db.DateTime(0)
  updatedAt             DateTime       @db.DateTime(0)
  storeItem             BookStoreItem?

  @@map("StoryLists")
}

model BookStoreItem {
  id          Int        @id @default(autoincrement())
  storyListId Int        @unique(map: "uq_book_store_items_story_list")
  priceCoins  Int        @default(100)
  currency    String     @default("COIN") @db.VarChar(20)
  isActive    Boolean    @default(true)
  soldCount   Int        @default(0)
  createdAt   DateTime   @default(now()) @db.DateTime(0)
  updatedAt   DateTime   @default(now()) @updatedAt @db.DateTime(0)
  story       StoryLists @relation(fields: [storyListId], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "book_store_items_ibfk_1")

  @@map("book_store_items")
}

model CoinLedger {
  id           Int      @id @default(autoincrement())
  userId       Int      @map("user_id")
  changeAmount Int      @map("change_amount")
  balance      Int
  type         String   @db.VarChar(30)
  source       String?  @db.VarChar(50)
  createdAt    DateTime @default(now()) @map("created_at") @db.DateTime(0)

  @@index([userId], map: "idx_user_id")
  @@map("coin_ledger")
}

model IapReceipt {
  id            Int      @id @default(autoincrement())
  userId        Int      @map("user_id")
  platform      String   @db.VarChar(20)
  productId     String   @map("product_id") @db.VarChar(100)
  transactionId String   @map("transaction_id") @db.VarChar(100)
  coins         Int
  status        String   @db.VarChar(20)
  rawResponse   Json?    @map("raw_response")
  createdAt     DateTime @default(now()) @map("created_at") @db.DateTime(0)

  @@unique([platform, transactionId], map: "uniq_receipt")
  @@map("iap_receipts")
}

model Abouts {
  id            Int      @id @default(autoincrement())
  lang          String?  @db.VarChar(255)
  about_content String?  @db.Text
  createdAt     DateTime @db.DateTime(0)
  updatedAt     DateTime @db.DateTime(0)
}

model ChapterFoolproofs {
  id                                         Int      @id @default(autoincrement())
  lang                                       String?  @db.VarChar(255)
  chapter_foolproof_story_name_size          Int?
  chapter_foolproof_story_name_weight        String?  @db.VarChar(255)
  chapter_foolproof_story_name_color         String?  @db.VarChar(255)
  chapter_foolproof_stroy_information_size   Int?
  chapter_foolproof_stroy_information_weight String?  @db.VarChar(255)
  chapter_foolproof_stroy_information_color  String?  @db.VarChar(255)
  chapter_foolproof_stroy_item1_size         Int?
  chapter_foolproof_stroy_item1_weight       String?  @db.VarChar(255)
  chapter_foolproof_stroy_item1_color        String?  @db.VarChar(255)
  chapter_foolproof_stroy_item2_size         Int?
  chapter_foolproof_stroy_item2_weight       String?  @db.VarChar(255)
  chapter_foolproof_stroy_item2_color        String?  @db.VarChar(255)
  createdAt                                  DateTime @db.DateTime(0)
  updatedAt                                  DateTime @db.DateTime(0)
}

model Chapters {
  id                  Int      @id @default(autoincrement())
  lang                String?  @db.VarChar(255)
  storyid             Int?
  order               String?  @db.VarChar(255)
  chapter_name        String?  @db.VarChar(255)
  chapter_name_size   Int?
  chapter_name_weight String?  @db.VarChar(255)
  chapter_name_color  String?  @db.VarChar(255)
  chapter_infor       String?  @db.Text
  chapter_img         String?  @db.VarChar(255)
  window_title        String?  @db.VarChar(255)
  window_btn_left     String?  @db.VarChar(255)
  window_btn_right    String?  @db.VarChar(255)
  free_open           String?  @db.VarChar(255)
  read_range_end      String?  @db.VarChar(255)
  createdAt           DateTime @db.DateTime(0)
  updatedAt           DateTime @db.DateTime(0)
}

model MainMenuFoolproofs {
  id                                      Int      @id @default(autoincrement())
  lang                                    String?  @db.VarChar(255)
  menu_foolproof_story_name_size          Int?
  menu_foolproof_story_name_weight        String?  @db.VarChar(255)
  menu_foolproof_story_name_color         String?  @db.VarChar(255)
  menu_foolproof_stroy_information_size   Int?
  menu_foolproof_stroy_information_weight String?  @db.VarChar(255)
  menu_foolproof_stroy_information_color  String?  @db.VarChar(255)
  menu_foolproof_stroy_item1_size         Int?
  menu_foolproof_stroy_item1_weight       String?  @db.VarChar(255)
  menu_foolproof_stroy_item1_color        String?  @db.VarChar(255)
  menu_foolproof_stroy_item2_size         Int?
  menu_foolproof_stroy_item2_weight       String?  @db.VarChar(255)
  menu_foolproof_stroy_item2_color        String?  @db.VarChar(255)
  createdAt                               DateTime @db.DateTime(0)
  updatedAt                               DateTime @db.DateTime(0)
}

model MainMenus {
  id                Int      @id @default(autoincrement())
  lang              String?  @db.VarChar(255)
  view_color        String?  @db.VarChar(255)
  news_font_size    Int?
  news_color        String?  @db.VarChar(255)
  news_weight       String?  @db.VarChar(255)
  story_type_size   Int?
  story_type_color  String?  @db.VarChar(255)
  story_type_weight String?  @db.VarChar(255)
  createdAt         DateTime @db.DateTime(0)
  updatedAt         DateTime @db.DateTime(0)
}

model Members {
  id        Int      @id @default(autoincrement())
  account   String?  @db.VarChar(255)
  password  String?  @db.VarChar(255)
  birthday  String?  @db.VarChar(255)
  sex       String?  @db.VarChar(255)
  role      String?  @db.VarChar(255)
  createdAt DateTime @db.DateTime(0)
  updatedAt DateTime @db.DateTime(0)
}

model News {
  id           Int      @id @default(autoincrement())
  lang         String?  @db.VarChar(255)
  news_content String?  @db.Text
  createdAt    DateTime @db.DateTime(0)
  updatedAt    DateTime @db.DateTime(0)
}

model NoChapters {
  id             Int      @id @default(autoincrement())
  lang           String?  @db.VarChar(255)
  storyid        Int?
  read_free      String?  @db.VarChar(255)
  read_range_end String?  @db.VarChar(255)
  createdAt      DateTime @db.DateTime(0)
  updatedAt      DateTime @db.DateTime(0)
}

model PurchaseHistories {
  id           Int      @id @default(autoincrement())
  memberId     Int?
  order_num    Int?
  order_time   String?  @db.VarChar(255)
  product_name String?  @db.VarChar(255)
  createdAt    DateTime @db.DateTime(0)
  updatedAt    DateTime @db.DateTime(0)
}

model Roles {
  id                     Int      @id @default(autoincrement())
  lang                   String?  @db.VarChar(255)
  storyid                Int?
  role_name              String?  @db.VarChar(255)
  role_sex               String?  @db.VarChar(255)
  role_infor             String?  @db.Text
  role_pic               String?  @db.VarChar(255)
  role_foolproof_title   String?  @db.VarChar(255)
  role_foolproof_content String?  @db.Text
  createdAt              DateTime @db.DateTime(0)
  updatedAt              DateTime @db.DateTime(0)
}

model Screenings {
  id              Int      @id @default(autoincrement())
  lang            String?  @db.VarChar(255)
  order           String?  @db.VarChar(255)
  storyid         Int?
  chapterid       Int?
  screenings_name String?  @db.VarChar(255)
  bg_view         String?  @db.VarChar(255)
  field_effect    String?  @db.VarChar(255)
  field_sec       String?  @db.VarChar(255)
  free_read       String?  @db.VarChar(255)
  main_role       String?  @db.VarChar(255)
  createdAt       DateTime @db.DateTime(0)
  updatedAt       DateTime @db.DateTime(0)
}

model SequelizeMeta {
  name String @id @unique(map: "name") @db.VarChar(255)
}

model SetupChapters {
  id                   Int      @id @default(autoincrement())
  lang                 String?  @db.VarChar(255)
  chapter_infor_size   Int?
  chapter_infor_weight String?  @db.VarChar(255)
  chapter_infor_color  String?  @db.VarChar(255)
  chapter_outer_color  String?  @db.VarChar(255)
  chapter_outer_weight String?  @db.VarChar(255)
  createdAt            DateTime @db.DateTime(0)
  updatedAt            DateTime @db.DateTime(0)
}

model SetupDialogues {
  id              Int      @id @default(autoincrement())
  lang            String?  @db.VarChar(255)
  dialogue_size   Int?
  dialogue_weight String?  @db.VarChar(255)
  dialogue_color  String?  @db.VarChar(255)
  createdAt       DateTime @db.DateTime(0)
  updatedAt       DateTime @db.DateTime(0)
}

model SetupStories {
  id                  Int      @id @default(autoincrement())
  lang                String?  @db.VarChar(255)
  main_menu_font_size Int?
  stroy_name_weight   String?  @db.VarChar(255)
  stroy_name_size     Int?
  stroy_name_color    String?  @db.VarChar(255)
  author_name_size    Int?
  author_name_weight  String?  @db.VarChar(255)
  author_name_color   String?  @db.VarChar(255)
  story_infor_size    Int?
  story_infor_weight  String?  @db.VarChar(255)
  story_infor_color   String?  @db.VarChar(255)
  createdAt           DateTime @db.DateTime(0)
  updatedAt           DateTime @db.DateTime(0)
}

model SetupStoryLists {
  id                 Int      @id @default(autoincrement())
  lang               String?  @db.VarChar(255)
  stroy_name_size    Int?
  stroy_name_weight  String?  @db.VarChar(255)
  stroy_name_color   String?  @db.VarChar(255)
  author_size        Int?
  author_weight      String?  @db.VarChar(255)
  author_color       String?  @db.VarChar(255)
  story_infor_size   Int?
  story_infor_weight String?  @db.VarChar(255)
  story_infor_color  String?  @db.VarChar(255)
  createdAt          DateTime @db.DateTime(0)
  updatedAt          DateTime @db.DateTime(0)
}

model SetupStoryRoleFoolproofs {
  id                                            Int      @id @default(autoincrement())
  lang                                          String?  @db.VarChar(255)
  setup_story_role_foolproof_name_size          Int?
  setup_story_role_foolproof_name_weight        String?  @db.VarChar(255)
  setup_story_role_foolproof_name_color         String?  @db.VarChar(255)
  setup_story_role_foolproof_information_size   Int?
  setup_story_role_foolproof_information_weight String?  @db.VarChar(255)
  setup_story_role_foolproof_information_color  String?  @db.VarChar(255)
  setup_story_role_foolproof_size               Int?
  setup_story_role_foolproof_weight             String?  @db.VarChar(255)
  setup_story_role_foolproof_color              String?  @db.VarChar(255)
  createdAt                                     DateTime @db.DateTime(0)
  updatedAt                                     DateTime @db.DateTime(0)
}

model SetupStoryRoles {
  id                    Int      @id @default(autoincrement())
  lang                  String?  @db.VarChar(255)
  role_name_size        Int?
  role_name_weight      String?  @db.VarChar(255)
  role_name_color       String?  @db.VarChar(255)
  role_infor_size       Int?
  role_infor_weight     String?  @db.VarChar(255)
  role_infor_color      String?  @db.VarChar(255)
  main_Role_Name_Color  String?  @db.VarChar(255)
  boy_Supporting_Color  String?  @db.VarChar(255)
  girl_Supporting_Color String?  @db.VarChar(255)
  createdAt             DateTime @db.DateTime(0)
  updatedAt             DateTime @db.DateTime(0)
}

model StoryContents {
  id                   Int      @id @default(autoincrement())
  lang                 String?  @db.VarChar(255)
  storyid              Int?
  chapterid            Int?
  screeningid          Int?
  order                String?  @db.VarChar(255)
  contentPresent       String?  @db.VarChar(255)
  role                 String?  @db.VarChar(255)
  roleName             String?  @db.VarChar(255)
  textContent          String?  @db.Text
  textContentSize      Int?
  textContentWeight    String?  @db.VarChar(255)
  textContentColor     String?  @db.VarChar(255)
  textContentBaseColor String?  @db.VarChar(255)
  graphy               String?  @db.VarChar(255)
  voice                String?  @db.VarChar(255)
  video                String?  @db.VarChar(255)
  videoFormat          String?  @db.VarChar(255)
  integer              String?  @db.VarChar(255)
  choice1Content       String?  @db.Text
  choice1Size          Int?
  choice1Weight        String?  @db.VarChar(255)
  choice1Color         String?  @db.VarChar(255)
  choice1BaseColor     String?  @db.VarChar(255)
  choice1Next          String?  @db.VarChar(255)
  choice2Content       String?  @db.Text
  choice2Size          Int?
  choice2Weight        String?  @db.VarChar(255)
  choice2Color         String?  @db.VarChar(255)
  choice2BaseColor     String?  @db.VarChar(255)
  choice2Next          String?  @db.VarChar(255)
  choice3Content       String?  @db.Text
  choice3Size          Int?
  choice3Weight        String?  @db.VarChar(255)
  choice3Color         String?  @db.VarChar(255)
  choice3BaseColor     String?  @db.VarChar(255)
  choice3Next          String?  @db.VarChar(255)
  createdAt            DateTime @db.DateTime(0)
  updatedAt            DateTime @db.DateTime(0)
}

model StoryTypes {
  id         Int      @id @default(autoincrement())
  lang       String?  @db.VarChar(255)
  story_type String?  @db.Text
  createdAt  DateTime @db.DateTime(0)
  updatedAt  DateTime @db.DateTime(0)
}

model SubscriptionRecords {
  id             Int      @id @default(autoincrement())
  memberId       Int?
  sub_num        Int?
  sub_start_time String?  @db.VarChar(255)
  sub_end_time   String?  @db.VarChar(255)
  sub_plan       String?  @db.VarChar(255)
  createdAt      DateTime @db.DateTime(0)
  updatedAt      DateTime @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model book_orders {
  id              BigInt   @id @default(autoincrement())
  user_id         BigInt
  story_list_id   Int
  price_coins     Int
  status          String   @default("SUCCESS") @db.VarChar(30)
  idempotency_key String   @db.VarChar(100)
  created_at      DateTime @default(now()) @db.DateTime(0)

  @@unique([user_id, idempotency_key], map: "uk_user_idem")
  @@index([story_list_id], map: "idx_story")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
//ÁÇ∫‰∫ÜÁ¨¶Âêà NestJS ÁöÑÈñãÁôºÁøíÊÖ£Ôºà‰ΩøÁî® camelCaseÔºâÔºåÂª∫Ë≠∞Âú® schema.prisma Âä†‰∏ä @@mapÔºö
// model Coin_Packs {
//   id           Int      @id @default(autoincrement())
//   platform     String   @db.VarChar(20)
//   // product_id   String   @db.VarChar(100) // üëà ÂéüÊú¨ÁöÑÊ¨Ñ‰Ωç
//   productId    String   @map("product_id") // üëà Á®ãÂºèÁ¢ºÂÖßÁî® productId
//   name         String   @db.VarChar(100)
//   amount       Int
//   bonus_amount Int      @default(0)
//   price        Decimal  @db.Decimal(10, 2)
//   currency     String   @db.VarChar(10)
//   is_active    Boolean  @default(true)
//   sort_order   Int      @default(0)
//   created_at   DateTime @default(now()) @db.DateTime(0)
//   updated_at   DateTime @default(now()) @db.DateTime(0)

//   // @@unique([platform, product_id], map: "uniq_platform_product") //ÂéüÊú¨ÁöÑÊ¨Ñ‰Ωç
//   @@unique([platform, productId], name: "platform_product_id")
//   @@map("coin_packs") // üëà Â∞çÊáâÂà∞Ë≥áÊñôÂ∫´ÁúüÂØ¶Ë°®Âêç
// }

model CoinPack {
  id          Int      @id @default(autoincrement())
  platform    String   @db.VarChar(20)
  productId   String   @map("product_id") @db.VarChar(100)
  name        String   @db.VarChar(100)
  amount      Int
  bonusAmount Int      @default(0) @map("bonus_amount")
  price       Decimal  @db.Decimal(10, 2)
  currency    String   @db.VarChar(10)
  isActive    Boolean  @default(true) @map("is_active")
  sortOrder   Int      @default(0) @map("sort_order")
  createdAt   DateTime @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at") @db.DateTime(0)

  // Ë§áÂêàÂîØ‰∏ÄÈçµÔºåÁ®ãÂºèÁ¢º‰∏≠ÊúÉÁîüÊàê platform_productId ÁµÑÂêà
  @@unique([platform, productId], name: "platform_productId")
  // üü¢ ÊåáÂêëË≥áÊñôÂ∫´‰∏≠ÁúüÂØ¶ÁöÑËõáÂΩ¢ÂëΩÂêçË°®Âêç
  @@map("coin_packs")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model entitlements {
  id            BigInt   @id @default(autoincrement())
  user_id       BigInt
  story_list_id Int
  created_at    DateTime @default(now()) @db.DateTime(0)

  @@unique([user_id, story_list_id], map: "uk_user_story")
  @@index([user_id], map: "idx_user")
}
